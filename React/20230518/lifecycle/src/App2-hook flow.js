import React, { useEffect, useLayoutEffect, useState } from "react";

function App() {
  const [num, setNum] = useState(0);

  const onClick = () => {
    setNum(num + 1);
  };
  
  // í´ë¦°ì—…í•¨ìˆ˜ê°€ ì¼ì–´ë‚˜ëŠ” ê²½ìš° -> 1. ì—…ë°ì´íŠ¸ë ë•Œ useLayoutEffect  useEffectë¡œ ì‹¤í–‰ë˜ëŠ”ê±° ì´ì „ì— ì¼ì–´ë‚¨ 
  // 2. ì–¸ë§ˆìš´íŠ¸ ë ë–„ (ê·¸ ì»´í¬ë„ŒíŠ¸ê°€ ì—†ì–´ì§ˆë•Œ ì•ˆë³´ì—¬ì§ˆë•Œ) 
  // í´ë¦°ì—… ->   useLayoutEffect  useEffect ê°€ returní•˜ëŠ” ê²ƒë“¤ !!!!

  useLayoutEffect(() => { 
    console.log("â±ë§ˆìš´íŠ¸ ë ë•Œ ë¸Œë¼ìš°ì €ì— ê·¸ë ¤ì£¼ê¸° ì „ì— ë”± í•œë²ˆì‹¤í–‰!"); //1
    return ()=>{
      console.log("â±ğŸ§¹ì–¸ë§ˆìš´íŠ¸ë ë•Œ ë‹¨ í•œë²ˆ ì‹¤í–‰ë©ë‹ˆë‹¤!") //ì–¸ë§ˆìš´íŠ¸1
    }
  }, []); 

	useLayoutEffect(() => {
    console.log("â±ë§ˆìš´íŠ¸/ì—…ë°ì´íŠ¸ ë ë•Œë§ˆë‹¤ ë¸Œë¼ìš°ì €ì— ê·¸ë ¤ì£¼ê¸° ì „ì— ì‹¤í–‰!"); //2 //ì—…ë°ì´íŠ¸3
    return ()=>{
      console.log("â±ğŸ§¹ì—…ë°ì´íŠ¸ê°€ ë ë•Œ, ì–¸ë§ˆìš´íŠ¸ë ë•Œ ì‹¤í–‰ë©ë‹ˆë‹¤!") //ì—…ë°ì´íŠ¸1 //ì–¸ë§ˆìš´íŠ¸2
    }
  }); 

  useLayoutEffect(() => {
    console.log("â±ë§ˆìš´íŠ¸ ë ë•Œ, num stateë³€ê²½ìœ¼ë¡œ ì¸í•´ ì—…ë°ì´íŠ¸ ë ë•Œ ë¸Œë¼ìš°ì €ì— ê·¸ë ¤ì£¼ê¸° ì „ì— ì‹¤í–‰!"); //3 //ì—…ë°ì´íŠ¸4
    return ()=>{
      console.log("â±ğŸ§¹ì—…ë°ì´íŠ¸ê°€ ë ë•Œ, ì–¸ë§ˆìš´íŠ¸ë ë•Œ ì‹¤í–‰ë©ë‹ˆë‹¤!") //ì—…ë°ì´íŠ¸2 //ì–¸ë§ˆìš´íŠ¸3
    }
  }, [num]);

  //useLayoutEffectê°€ ëª¨ë‘ ëë‚œ í›„ì—ì•¼ ë¸Œë¼ìš°ì €ì— ê·¸ë ¤ì£¼ê¸° ì‹œì‘í•©ë‹ˆë‹¤.

  useEffect(() => {
    console.log("ğŸˆë§ˆìš´íŠ¸ ë ë•Œ ë¸Œë¼ìš°ì €ì— ê·¸ë ¤ì§„ í›„ ë”± í•œë²ˆì‹¤í–‰!"); //4
    return ()=>{
      console.log("ğŸˆğŸ§¹ì–¸ë§ˆìš´íŠ¸ë ë•Œ ë‹¨ í•œë²ˆ ì‹¤í–‰ë©ë‹ˆë‹¤!") //ì–¸ë§ˆìš´íŠ¸4
    }
  }, []); 

	useEffect(() => {
    console.log("ğŸˆë§ˆìš´íŠ¸/ì—…ë°ì´íŠ¸ ë ë•Œë§ˆë‹¤ ë¸Œë¼ìš°ì €ì— ê·¸ë ¤ì§„ í›„ ì‹¤í–‰!"); //5 //ì—…ë°ì´íŠ¸7
    return ()=>{
      console.log("ğŸˆğŸ§¹ì—…ë°ì´íŠ¸ê°€ ë ë•Œ, ì–¸ë§ˆìš´íŠ¸ë ë•Œ ì‹¤í–‰ë©ë‹ˆë‹¤!") //ì—…ë°ì´íŠ¸5 //ì–¸ë§ˆìš´íŠ¸5
    }
  }); 

  useEffect(() => {
    console.log("ğŸˆë§ˆìš´íŠ¸ ë  ë•Œ, num stateë³€ê²½ìœ¼ë¡œ ì¸í•´ ì—…ë°ì´íŠ¸ ë ë•Œ ë¸Œë¼ìš°ì €ì— ê·¸ë ¤ì§„ í›„ ì‹¤í–‰!"); //6 //ì—…ë°ì´íŠ¸8
    return ()=>{
      console.log("ğŸˆğŸ§¹ì—…ë°ì´íŠ¸ê°€ ë ë•Œ, ì–¸ë§ˆìš´íŠ¸ë ë•Œ ì‹¤í–‰ë©ë‹ˆë‹¤!") //ì—…ë°ì´íŠ¸6 //ì–¸ë§ˆìš´íŠ¸6
    }
  }, [num]);

  return (
      <button onClick={onClick}>{num}</button>
  );
}
const Wrap = ()=>{
  const [isVisible,setIsVisible] = useState(true)
  const handleClick = ()=> setIsVisible(!isVisible)
  return (
    <>
      <button onClick={handleClick}>{isVisible? "ì–¸ë§ˆìš´íŠ¸ì‹œí‚¤ê¸°" : "ë§ˆìš´íŠ¸ì‹œí‚¤ê¸°"}</button>
      <br></br>
      {isVisible&& <App />}
    </>
  )
}

export default Wrap